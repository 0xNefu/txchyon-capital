<!-- src/components/PostCard.astro -->
---
const { post } = Astro.props;
const { title, description, date, category, subcategory } = post.data;
const { slug } = post;  // ← Use slug (clean, no .md)

const formattedDate = new Date(date).toLocaleDateString('en-US', {
  month: 'short',
  day: 'numeric',
  year: 'numeric'
});
---

<article class="bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow">
  <div class="p-6">
    <div class="mb-4">
      <span class="inline-block px-3 py-1 text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full">
        {category || 'Crypto'}
      </span>
      {subcategory && (
        <span class="inline-block ml-2 px-3 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 rounded-full">
          {subcategory}
        </span>
      )}
    </div>
    
    <h3 class="text-xl font-bold mb-3 text-gray-900 dark:text-white">
      <a href={`/blog/${slug}`} class="hover:text-primary transition-colors">
        {title}
      </a>
    </h3>
    
    {description && (
      <p class="text-gray-600 dark:text-gray-400 mb-4 line-clamp-2 text-sm">
        {description}
      </p>
    )}
    
    <div class="flex justify-between items-center text-sm text-gray-500 dark:text-gray-400">
      <span>{formattedDate}</span>
      <a href={`/blog/${slug}`} class="text-primary font-medium hover:underline">
        Read →
      </a>
    </div>
  </div>
</article>

<style>
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>