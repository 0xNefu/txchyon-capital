---
// src/components/ads/GoogleAd.astro - UPDATED
const { pathname } = Astro.url;
const { position = 'middle' } = Astro.props;

const isBlogPost = pathname.startsWith('/blog/');
const isPostDetail = pathname.includes('/blog/') && !pathname.endsWith('/blog');

// SHOW IN DEVELOPMENT FOR TESTING
const shouldShowAds = isBlogPost; // Removed && import.meta.env.PROD

// REPLACE THESE WITH YOUR REAL AD SLOT IDs from AdSense
const adSlots = {
  'top': '5972464010',        // e.g., 1234567890
  'middle': '4515912114',  // e.g., 0987654321  
  'bottom': '8842347544'   // e.g., 1122334455
};

const slotId = adSlots[position] || adSlots.middle;
---

{shouldShowAds && (
  <div class="ad-container" data-ad-type="blog" data-ad-position={position}>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6121972957488905"
     crossorigin="anonymous"></script>

    <!-- Responsive Ad Unit -->
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6121972957488905"
         data-ad-slot={slotId}  <!-- UPDATED: Uses variable -->
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <!-- Optional: Ad disclosure -->
    <div class="ad-disclosure">
      <span class="text-xs opacity-70">Advertisement</span>
    </div>
  </div>
)}

<style>
  .ad-container {
    margin: 2rem auto;
    padding: 1rem;
    text-align: center;
    max-width: 1200px;

    /* Dark mode */
    background: rgba(30, 41, 59, 0.3);
    border: 1