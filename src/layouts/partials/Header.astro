---
import Logo from "@/components/Logo.astro";
import menu from "@/config/menu.json";
import { IoSearch } from "react-icons/io5";

export interface ChildNavigationLink {
  name: string;
  url: string;
}

export interface NavigationLink {
  name: string;
  url: string;
  hasChildren?: boolean;
  children?: ChildNavigationLink[];
}

const { main }: { main: NavigationLink[] } = menu;
---

<header class="header pt-6">
  <nav class="navbar container">
    <!-- Logo -->
    <div class="order-0">
      <Logo />
    </div>

    <!-- Mobile toggler -->
    <input id="nav-toggle" type="checkbox" class="hidden" />
    <label
      for="nav-toggle"
      class="order-3 flex cursor-pointer items-center md:hidden"
    >
      <svg class="h-6 fill-current" viewBox="0 0 20 20">
        <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
      </svg>
    </label>

    <!-- Navigation Links (your Yield, Perps, etc.) -->
    <ul
      id="nav-menu"
      class="order-3 hidden w-full md:flex md:w-auto md:space-x-8 md:items-center"
    >
      {main.map((item) => (
        <li class="nav-item">
          <a href={item.url} class="nav-link block hover:text-primary transition">
            {item.name}
          </a>
        </li>
      ))}
    </ul>

    <!-- Search + Dark Mode Toggle -->
    <div class="order-1 ml-auto flex items-center gap-5 md:order-2">
      <a href="/search" class="text-xl hover:text-primary transition">
        <IoSearch />
      </a>

      <!-- FINAL WORKING DARK MODE BUTTON -->
      <button
        id="theme-toggle"
        class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition"
        aria-label="Toggle dark mode"
      >
        <svg class="w-5 h-5 hidden dark:block" fill="currentColor" viewBox="0 0 20 20">
          <path d="M10 2a1 1 0 011 1v1