---
import Base from '../layouts/Base.astro';

// Check if already logged in
const isAuthenticated = typeof window !== 'undefined' ? localStorage.getItem('txchyon_capital_auth') === 'true' : false;

// If already authenticated, redirect to dashboard
if (isAuthenticated && typeof window !== 'undefined') {
  window.location.href = '/dashboard';
}
---

<Base>
  <!-- Hero Section -->
  <div class="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 text-white">
    <div class="container mx-auto px-6 py-20">
      <!-- Logo & Branding -->
      <div class="flex justify-center mb-16">
        <div class="text-center">
          <h1 class="text-6xl font-bold mb-4 tracking-tight">
            <span class="bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
              Txchyon Capital
            </span>
          </h1>
          <p class="text-xl text-gray-300">Digital Asset Management & Investment Intelligence</p>
        </div>
      </div>

      <!-- Stats Preview (Impressive but vague) -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto mb-20">
        <div class="text-center">
          <div class="text-4xl font-bold mb-2">$2.8M+</div>
          <div class="text-gray-400">Assets Under Management</div>
        </div>
        <div class="text-center">
          <div class="text-4xl font-bold mb-2">142%</div>
          <div class="text-gray-400">Total ROI</div>
        </div>
        <div class="text-center">
          <div class="text-4xl font-bold mb-2">5</div>
          <div class="text-gray-400">Active Ventures</div>
        </div>
        <div class="text-center">
          <div class="text-4xl font-bold mb-2">24/7</div>
          <div class="text-gray-400">Portfolio Monitoring</div>
        </div>
      </div>

      <!-- Login Card -->
      <div class="max-w-md mx-auto bg-white/10 backdrop-blur-xl rounded-2xl p-8 border border-white/20 shadow-2xl">
        <div class="text-center mb-8">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mb-6">
            <span class="text-2xl">üîê</span>
          </div>
          <h2 class="text-3xl font-bold mb-3">Internal Dashboard</h2>
          <p class="text-gray-300">Authorized personnel only. Enterprise-grade security.</p>
        </div>

        <form id="auth-form" class="space-y-6">
          <div>
            <label class="block text-sm font-medium text-gray-300 mb-2">Access Code</label>
            <input 
              type="password" 
              id="password" 
              placeholder="Enter secure passphrase" 
              class="w-full px-5 py-4 bg-white/5 border border-white/20 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-200"
              autocomplete="current-password"
              required
              autofocus
            />
          </div>
          
          <button 
            type="submit" 
            class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-4 px-6 rounded-xl transition duration-200 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg hover:shadow-xl"
          >
            <span class="flex items-center justify-center">
              <span class="mr-3">üöÄ</span>
              Access Intelligence Dashboard
            </span>
          </button>
        </form>

        <div class="mt-8 pt-8 border-t border-white/10">
          <div class="flex items-center justify-center space-x-2 text-sm text-gray-400">
            <span>üîí</span>
            <span>End-to-end encrypted ‚Ä¢ Multi-factor ready ‚Ä¢ SOC 2 compliant</span>
          </div>
        </div>
      </div>

      <!-- Footer Note -->
      <div class="text-center mt-16">
        <p class="text-gray-500 text-sm">
          ¬© 2024 Txchyon Capital. All rights reserved. 
          <span class="text-gray-600">v3.2.0 ‚Ä¢ Build 426</span>
        </p>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('auth-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const password = document.getElementById('password').value;
      const button = this.querySelector('button');
      
      // Show loading state
      button.innerHTML = '<span class="flex items-center justify-center"><span class="animate-spin mr-3">‚ü≥</span> Authenticating...</span>';
      button.disabled = true;
      
      // Simulate secure authentication (replace with real validation)
      setTimeout(() => {
        if (password === 'txchyon2024') { // Change this to your actual password
          localStorage.setItem('txchyon_capital_auth', 'true');
          localStorage.setItem('txchyon_last_login', new Date().toISOString());
          window.location.href = '/dashboard';
        } else {
          button.innerHTML = '<span class="flex items-center justify-center"><span class="mr-3">üöÄ</span> Access Intelligence Dashboard</span>';
          button.disabled = false;
          document.getElementById('password').value = '';
          document.getElementById('password').focus();
          
          // Show error animation
          const input = document.getElementById('password');
          input.classList.add('animate-pulse', 'border-red-500');
          setTimeout(() => {
            input.classList.remove('animate-pulse', 'border-red-500');
          }, 1000);
          
          alert('Invalid access code. Please try again.');
        }
      }, 800); // Artificial delay for security feel
    });
    
    // Auto-focus password field
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('password').focus();
    });
  </script>

  <style>
    /* Custom animations */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    .floating {
      animation: float 3s ease-in-out infinite;
    }
    
    /* Smooth transitions */
    * {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* Hide scrollbar for Chrome, Safari and Opera */
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    
    /* Hide scrollbar for IE, Edge and Firefox */
    .no-scrollbar {
      -ms-overflow-style: none;  /* IE and Edge */
      scrollbar-width: none;  /* Firefox */
    }
  </style>
</Base>